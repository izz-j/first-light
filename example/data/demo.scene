;; -*- mode: common-lisp -*-

(in-package :gear-example)

(defun random-shots (base extra)
  (+ base (random extra)))

(scene-definition :demo (:enabled t)
  ((@camera
    ((transform :translation/current (vec 0 0 10))
     (camera :activep t
             :mode :orthographic
             :transform (get-component 'transform @camera))))
   (@player-ship
    ((transform :rotation/incremental (vec 0 0 0.1))
     (mesh-renderer)
     (hit-points :hp 100))

    (@thing1
     ((transform :translation/current (vec 150 0 0))
      (mesh-renderer)))

    (@turret
     ((transform)
      (gun-manager :active-gun 0
                   :guns (vector (get-component 'gun @laser)
                                 (get-component 'gun @missile))))
     (@laser
      ((transform)
       (gun :shot-count 10
            :shot-type :beam)))
     (@missile
      ((transform)
       (gun :shot-count (random-shots 5 5)
            :shot-type :homing)))))))
